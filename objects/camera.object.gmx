<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>CONTROL</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>followThis = obj_player;
follow_speed = 1;

view_min_zoom = 0.8;
view_zoom=1;
view_max_zoom=1;
zoom_rate = 1;

cloudBkg_xOffset = 0;

globalvar viewWidth, viewHeight;
viewWidth = view_wview[0];
viewHeight = view_hview[0];


//Further fit backgrounds
/*if room == rm_zero || rm_tutorial
{
    background_xscale[3] = 0.5;
    background_yscale[3] = 0.5;
    background_xscale[2] = 0.3;
    background_yscale[2] = 0.3;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Follow an instance
view_zoom = 1;

if instance_exists(followThis)
{
    var fx = followThis.x;
    var fy = followThis.y;
    
    if distance_to_point(fx,fy) &gt; 4
    {
        x += round(((fx - x)*follow_speed)*0.5);
        y += round(((fy - y)*follow_speed)*0.5);
    } else
    {
        //Otherwise snap to the point!
        x = fx;
        y = fy;
    }
    
    x = round(x);
    y = round(y);
}

//Update view based on zoom
view_wview[0] = round(obj_init.ideal_width/view_zoom);
view_hview[0] = round(obj_init.ideal_height/view_zoom);

//Center on camera
view_xview[0] = round(x-(view_wview[0]/2)-10);
view_yview[0] = round(y-(view_hview[0]/2)-10);

//clamp to room
view_xview[0] = round(clamp(view_xview[0],0,room_width-view_wview[0]));
view_yview[0] = round(clamp(view_yview[0],0,room_height-view_hview[0]));

//GameOver
if instance_exists(gameControl)
{
    if gameOver == true 
    {
        //Transition
        followThis = obj_pie;
        
        if !instance_exists(efct_overMessage)
        {
            scr_overMessage("Game Over",global.fnt_menu,60*room_speed,c_red);
        }
        
        if background_index[0] != bkg_lobbySky
        {
            background_index[0] = bkg_lobbySky;
            background_index[1] = bkg_lobbyStars1;
            background_index[2] = bkg_lobbyStars2;
            background_index[3] = bkg_lobbyStars3;
            background_index[4] = bkg_white;
        
            background_visible[0] = true;
            background_visible[1] = true;
            background_visible[2] = true;
            background_visible[3] = true;
            background_visible[4] = true;
            
            background_alpha[0] = 1;
            background_alpha[1] = 1;
            background_alpha[2] = 1;
            background_alpha[3] = 1;
            background_alpha[4] = 1;
            
            background_htiled[0] = true;
            background_htiled[1] = true;
            background_htiled[2] = true;
            background_htiled[3] = true;
            background_htiled[4] = true;
            
            background_vtiled[0] = true;
            background_vtiled[1] = true;
            background_vtiled[2] = true;
            background_vtiled[3] = true;
            background_vtiled[4] = true;
        }
        
        if background_alpha[4] != 0
        {
            background_alpha[4] = approach(background_alpha[4],0,0.01);
        }
        
        //Background animations
        
        //- this variable will be used for the stars
        cloudBkg_xOffset += 0.05;
        
        background_x[1] = view_xview/1.15 + cloudBkg_xOffset;
        background_x[2] = view_xview/1.3 + cloudBkg_xOffset;
        background_x[3] = view_xview/1.45 + cloudBkg_xOffset;
        
        background_y[1] = (-view_yview/5) + cloudBkg_xOffset/1.1;
        background_y[2] = (-view_yview/5.15)-64 + cloudBkg_xOffset;
        background_y[3] = (-view_yview/5.25)-64 + cloudBkg_xOffset;
        
        background_vspeed[4] = 0.05;
    }
}



//Parallax Background
//--Smaller the number the slower the background moves

//Need to change this to account for other regions in the future ;p
if room == rm_zero &amp;&amp; gameOver == false &amp;&amp; hudControl.showBackground == true
{
    cloudBkg_xOffset += 0.05;
    if cloudBkg_xOffset &gt; 319 then cloudBkg_xOffset = 0;
    
    var _dayAlpha = worldControl.dayAlpha/0.6; // dayAlpha/[MAGIC NUMBER]: MN is the maximum dayAlpha value.
    var max_saturation = 80;
    var world_TimeMax = worldControl.world_TimeMax;
    var daylight_offset = world_Time-(world_TimeMax*0.4); //70% of world_TimeMax for use in offsetting the day/night cycle.
    var light_color1 = make_colour_hsv(160,max(0+clamp(daylight_offset/20-3*65,0,max_saturation),max_saturation-max_saturation*interm),255); //Increase saturation for cool 'nightime' effect.
    var light_color2 = make_colour_hsv(160,max(0+clamp(daylight_offset/20-3*65,0,max_saturation-10),max_saturation-max_saturation*interm),235);
    
    background_alpha[1] = _dayAlpha; //night sky
    
    background_blend[2] = light_color2; //hill
    background_blend[3] = light_color1; //hill close
    background_blend[4] = light_color1; //foreground
    
    background_x[1] = view_xview/1.1; //stars
    background_x[2] = view_xview/1.3; //hills
    background_x[3] = view_xview/1.6; //hills close
    background_x[4] = view_xview/2.2; //grass
    
    background_y[2] = (-view_yview/5.15)+85*4; //hill
    background_y[3] = (-view_yview/5.20)+95*3; //hill close
    background_y[4] = (-view_yview/5.25)-52; //foreground feature
    
}/* else if room == rm_lobby
{
    //This variable will be used for the stars
    cloudBkg_xOffset += 0.05;
    //if cloudBkg_xOffset &gt; 640 then cloudBkg_xOffset = 0;
    background_x[1] = view_xview/1.15 + cloudBkg_xOffset;
    background_x[2] = view_xview/1.3 + cloudBkg_xOffset;
    background_x[3] = view_xview/1.45 + cloudBkg_xOffset;
    
    background_y[1] = (-view_yview/5) + cloudBkg_xOffset/1.1;
    background_y[2] = (-view_yview/5.15)-64 + cloudBkg_xOffset;
    background_y[3] = (-view_yview/5.25)-64 + cloudBkg_xOffset;
    
    background_vspeed[0] = 0.05;

}

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
